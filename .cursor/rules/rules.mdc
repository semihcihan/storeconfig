---
description: General Project description and resources/references, API specifications, functionalities.
globs:
alwaysApply: false
---

# Project Context: App Store Sync CLI

This is a Node.js CLI tool for synchronizing in-app purchases (IAPs) and subscriptions with the Apple App Store Connect API from a local JSON file.

## Key Information

- **Technology Stack:**

  - Runtime: Node.js
  - Libraries: `jsonwebtoken`, `axios`, `yargs`, `dotenv`. We will use `yargs` for the CLI interface.

- **Authentication:**

  - Uses JWT tokens generated from a private key (`.p8`), Key ID, and Issuer ID.
  - Configuration is managed via a `.env` file with `ASC_ISSUER_ID`, `ASC_KEY_ID`, and `ASC_PRIVATE_KEY_PATH`.

- **Core Functionality:**

  - The tool will sync IAPs and subscriptions based on a local JSON file.
  - It supports creating, updating, and deleting these items.
  - It includes commands for:
    - `app-store-sync init`: Creates a sample `iaps.json` file.
    - `app-store-sync validate --file <path>`: Validates the JSON file.
    - `app-store-sync plan --file <path>`: Shows a plan of changes (dry run).
    - `app-store-sync apply --file <path>`: Applies the changes to App Store Connect.

- **Development Plan:**
  - The development will follow the plan in `Project.md`. We are at the beginning of this plan.
  - The next step is to set up the project.

## References and Examples

- **Example and Schema:**

  - Refer to `@example.json` for a sample structure of the IAPs and subscriptions file we will use.
  - We have `../../src/generated/app-store-connect-api/index.ts` which was autogenerated using the openapi specifications Apple provides. This is the source of truth for all the API call details.
  - As an LLM, you should instead use `../../openapi` directory to search find related definition names etc as index.ts is too large as a context.
  - We use our own format for the json though which is defined at `../../src/models/app-store.ts`. We will go back and forth between our json format and our own models here and openapi auto generated models

- **Apple Developer Documentation:**
  - [Managing In-App Purchases](https://developer.apple.com/documentation/appstoreconnectapi/managing-in-app-purchases)
  - [Creating API Keys for App Store Connect API](https://developer.apple.com/documentation/appstoreconnectapi/creating-api-keys-for-app-store-connect-api)
  - [Generating Tokens for API Requests](https://developer.apple.com/documentation/appstoreconnectapi/generating-tokens-for-api-requests)
